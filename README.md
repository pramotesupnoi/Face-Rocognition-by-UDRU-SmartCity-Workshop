# Face-Rocognition-by-UDRU-SmartCity-Workshop
ซอร์สโค้ดภาษา Python โปรแกรมตรวจจับ และจดจำใบหน้าจาก Workshop AI Udon Thani Smart City ณ มหาวิทยาลัยราชภัฏอุดรธานี (12/09/2019)   

##### เอกสารที่นำมาเผยแพร่ชุดนี้จัดทำโดย
ผศ.ดร.กริช สมกันธา  
ผศ.ปณิธาน เมฆกมล  
ผศ.ดร.กฤษณพงศ์ สมสุข  
ดร.มงคล ทะกอง  
อ.ศรุติ อัศวเรืองสุข

### การเตรียมโปรเจ็ค
1. ดาวน์โหลดและติดตั้ง [Python](https://www.python.org/ "Python") 
2. ดาวน์โหลดและติดตั้ง [Anaconda Distribution (Python package manager)](https://www.anaconda.com/distribution/ "Anaconda Distribution")  
   1. ตรวจสอบแพ็กเกจ Anaconda ที่จำเป็นต้องโช้โดยใช้คำสั่ง `conda list` โดยแพ็กเกจที่จำเป็นได้แก่  
        - jobjib  
        - matplotlib  
        - numpy  
        - opencv-python   
        - pandas  
        - scikit-learn  
โดยปกติแพ็กเกจที่จำเป็นจะถูกติดตั้งมาแล้ว ยกเว้น opencv-python ทำการติดตั้งโดยเปิด Command Line หรือ Terminal แล้วใช้คำสั่ง `pip install opencv-python` หากไม่พบแพ็กเกจไหนตามที่ระบุไว้ด้านบนก็ทำการติดตั้งให้เรีบยร้อยก่อนทำขั้นตอนถัดไป  
   2. อัพเดตแพ็คเกจทั้งหมดของ Anaconda ด้วยคำสั่ง `conda update --all` 
3. ดาวน์โหลดซอร์สโค้ดจากโฟลเดอร์ recognition_code ไปยังคอมพิวเตอร์  

### วิธีใช้งาน
1. เปิด Command Line หรือ Terminal 
2. ใช้คำสั่ง `cd` ไปยังโฟลเดอร์ที่เก็บซอร์สโค้ด
3. รันคำสั่ง `python face_preparation.py` เพื่อเปิดโปรแกรมบันทึกใบหน้า โดยโปรแกรมจะขอให้ระบุชื่อของเจ้าของใบหน้าก่อน จากนั้นจำเปิดกล้องเพื่อตรวจจับใบหน้า ให้กด space เพื่อทำการบันทึกใบหน้าในมุมต่างๆ ให้ครบ 20 ภาพ จากนั้นโปรแกรมจะปิดตัวเอง จะพบว่าในโฟลเดอร์  datasets/faces จะมีโฟลเดอร์ใหม่ขึ้นมาโดยมีชื่อตามที่ได้ระบุว่าเป็นชื่อเจ้าของใบหน้า และภายในจะมีภาพใบหน้าที่โปรแกรมได้บันทึกเอาไว้
4. รันคำสั่ง `python create_dataset_link.py` เพื่อรันโปรแกรมสร้างไฟล์ .csv สำหรับเก็บตำแหน่งรูปภาพ และ label เมื่อโปรแกรมทำงานเสร็จสิ้นจะได้ไฟล์ใหม่ในโฟลเดอร์ datasets ชื่อว่า faces.csv
5. รันคำสั่ง `python create_dataset.py` เพื่อรันโปรแกรมรวบรวมรูปภาพใบหน้าเข้ามาไว้ในที่เดียวกัน โดยรูปภาพใบหน้าทั้งหมดจะถูกนำไปเก็บรวมกันไว้ในโฟลเดอร์ datasets/processed และจะได้ไฟล์ .csv สำหรับเก็บตำแหน่งรูปภาพและ label ขึ้นมาใหม่อีกไฟล์ในโฟลเดอร์ datasets ชื่อว่า processed.csv
6. ทำการนำรูป และข้อมูลเข้าสู่กระบวนการ Machine learning โดยรันคำสั่ง `python trainmodel.py` เมื่อโปรแกรมทำงานเสร็จสิ้นจะได้ไฟล์ชื่อว่า model.lib
7. ตรวจสอบประสิทธิภาพของโมเดลโดยรันคำสั่ง `python validate.py`
8. ทดสอบผลลัพธ์โดยรันคำสั่ง `recog_face.py` โดยโปรแกรมจะเปิดกล้องขึ้นมาตรวจจับใบหน้า หากพบใบหน้าที่ตรงกับที่ถูกประมวลผลเอาไว้โปรแกรมจะแสดงชื่อ และอัตราความแม่นยำไว้มุมด้านบนของใบหน้า

*ดูข้อมูลเพิ่มเติมได้จากสไลด์ face_recognition_smartcity.pptx*
